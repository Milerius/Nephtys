add_library(loguru OBJECT)
find_package(Threads)
target_sources(loguru PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/loguru.cpp)
if (UNIX)
    target_link_libraries(loguru PUBLIC Threads::Threads $<$<PLATFORM_ID:Linux>:${CMAKE_DL_LIBS}>)
endif ()
target_include_directories(loguru PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})
target_compile_definitions(loguru PUBLIC $<$<CXX_COMPILER_ID:MSVC>:_CRT_SECURE_NO_WARNINGS>)
add_library(nephtys::loguru ALIAS loguru)